<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:define name="conteudo">

		<h:form id="form1" style="text-align: left ">

			<p:messages id="mensagem" autoUpdate="true">
				<p:effect type="drop" event="load" delay="2000" speed="1000" />
			</p:messages>

			<p:panel id="panel" style="font-size: 14px; border: 0;  ">

				<h2>Cadastro de Feedback</h2>
				
				<p:spacer height="10px"></p:spacer>

				<p:focus context="panel" />

				<h:panelGrid align="center" columns="4" width="950"
					style="text-align: left" border="0">

					<p:outputLabel for="_tipoAtendimento" value="Tipo de Atendimento: " required="true" />
					
					<p:selectOneMenu  id="_tipoAtendimento" effect="clip" value="#{feedbackMB.feedback.tipoAtendimento}" style="width:165px"  >
						<f:selectItems value="#{feedbackMB.tiposAtendimento}"
			            			 	var="tipo" itemLabel="#{tipo.descricao}"  itemValue="#{tipo}"/>
        			</p:selectOneMenu>
        			
        			<p:outputLabel for="_cliente" value="Cliente: " required="true" />
					<p:selectOneMenu  id="_cliente" effect="clip" value="#{feedbackMB.cliente.codCliente}" style="width:165px"  >
						<f:selectItems value="#{clienteMB.clientes}" var="cliente" itemLabel="#{cliente.nome}" 
            				itemValue="#{cliente.codCliente}"/>  
        			</p:selectOneMenu>
        			
        			<p:outputLabel for="_tipoItem" value="Tipo de Item: "  />
					<p:selectOneMenu   id="_tipoItem" effect="clip" value="#{feedbackMB.tipoItem}" style="width:165px"  >						
	            		<f:selectItem itemLabel="Selecione" />
	            		<f:selectItems value="#{feedbackMB.tiposItem}"
				            			 	var="tipo" itemLabel="#{tipo.descricao}" itemValue="#{tipo}"/>
				        <p:ajax event="change" listener="#{feedbackMB.escolherTipoItem}" process="@this, _cliente " update="_item"/>	
        			</p:selectOneMenu>
        			
        			
        			
        			<h:outputLabel for="_item" value="Item: "  />        		
					<p:selectOneMenu id="_item" effect="clip" value="#{feedbackMB.feedback.item.cod}" style="width:165px" 
								disabled="#{empty feedbackMB.itens}" >
							
            			<f:selectItems value="#{feedbackMB.itens}" var="item" itemLabel="#{item.nome}" 
            				itemValue="#{item.cod}"/>  
	        		</p:selectOneMenu>
	        			
        			
        			
			 		<p:outputLabel for="_nota" value="Nota: " />
					<p:inputText id="_nota" value="#{feedbackMB.feedback.nota}"
						required="true" requiredMessage="Nota não preenchida."
						size="20" />

					<p:outputLabel for="_dataFeedback" value="Data do Feedback: " />
					<p:calendar value="#{feedbackMB.feedback.dataFeedback}" id="_dataFeedback" required="true" pattern="dd/MM/yyyy" locale="pt" />

					<p:outputLabel for="_observacao" value="Observação: " required="true" />
					
					<p:inputTextarea id="_observacao" value="#{feedbackMB.feedback.observacao}" 
						rows="2"  cols="35"/>
				</h:panelGrid>
			</p:panel>
			<p:panel style="float: center; border: 0;">

				<p:spacer width="10px" />

				<p:commandButton value="Salvar" action="#{feedbackMB.salvarFeedback}" 
					style="margin: 0" />

				<p:spacer width="10px" />
				<p:commandButton value="Limpar" action="#" style="margin: 0" />

				<p:spacer width="10px" />

				<p:commandButton value="Listar" action="#" style="margin: 0" />

			</p:panel>
		</h:form>


	</ui:define>
</ui:composition>
